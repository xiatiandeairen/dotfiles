# Git filter-branch to remove file/folder from history
delete_file_from_git_history() {
  if [ -z "$1" ]; then
    echo "Usage: git_remove_file_from_history <file-or-folder-path>"
    return 1
  fi
  
  local path_to_remove=$1

  echo "Removing $path_to_remove from history..."

  # Use git filter-branch to remove the file or folder from history
  git filter-branch --force --index-filter \
    "git rm --cached -r --ignore-unmatch $path_to_remove" \
    --prune-empty --tag-name-filter cat -- --all

  # Clean up reflog and git gc
  git reflog expire --expire=now --all
  git gc --prune=now --aggressive

  echo "$path_to_remove has been removed from history."
}
